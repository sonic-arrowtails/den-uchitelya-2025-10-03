# Некоторые команды CMD

Главная папка с примерами и ссылками:

<https://github.com/sonic-arrowtails/den-uchitelya-2025-10-03>

![QR код репозитории](frame.png)

`whoami` — выводит имя текущего пользователя и информацию о его правах. Удобно, если нужно понять, работает ли консоль под администратором или обычным аккаунтом.

Контрол + С прерывает программу.

## Общие команды CMD

Общие команды командной строки позволяют управлять Windows через текстовый интерфейс. Их можно использовать как вручную, так и внутри батч-скриптов.

`help` — выводит список всех доступных команд с кратким описанием. Отличный способ посмотреть, что умеет CMD, если под рукой нет интернета.

`cls` — очищает экран консоли. Если окно завалено кучей текста, эта команда убирает весь вывод и создаёт «чистый лист».

`exit` — завершает текущую сессию командной строки и закрывает окно CMD. В батч-файлах можно использовать `exit /b`, чтобы завершить только скрипт, не закрывая окно.

`title` — меняет заголовок окна CMD. Например, `title Моя Командная Строка` сделает именно такой заголовок окна. Полезно, если у вас несколько окон и нужно отличать их друг от друга.

`date` — показывает текущую системную дату и позволяет её изменить.

`time` — аналогично для времени.

`fc` — сравнивает два файла и показывает различия. Используется в отладке и проверке.

`color` — изменяет цвета текста и фона в консоли. Формат: `color XY`, где X — фон, Y — текст. Например:

```batchfile
color 0a
```

сделает чёрный фон и зелёные буквы (классический «хакерский» стиль).

`cmd /c` — запустить команду и закрыть консоль сразу после выполнения.
`cmd /k` — запустить команду и оставить консоль открытой.
Пример:

```batchfile
cmd /c dir
```

выведет список файлов и тут же закроется.

```batchfile
cmd /k dir
```

сделает то же самое, но окно останется открытым.

`start "" "название_файла"` — откроет указанный файл в программе по умолчанию. Например:

```batchfile
start "" "картинка.jpg"
```

откроет картинку в стандартной «Просмотр фотографий» или «Фотографии».

## Команды для управления файловой системой

`dir` — показать список файлов и папок в текущей или указанной директории. Пример: `dir C:\Windows`.

`cd` — сменить каталог. `cd C:\Users` переключит в папку пользователей.

`md NewFolder` — создать новую папку с именем NewFolder. Аналог mkdir в Unix.

`rd` — удалить пустую папку. Пример: `rd NewFolder`. Если в папке есть файлы, её не удалить без параметров.

`copy` — копирует файлы. Например, `copy file.txt D:\Backup`.

`move` — перемещает файлы или папки.

`del` — удаляет файлы. Например, `del file.txt`.

`xcopy` — копирует папки целиком вместе со структурой. Пример:

```batchfile
xcopy C:\Source D:\Dest /s /e
```

скопирует всё содержимое из папки C:\Source в D:\Dest.

`robocopy` — «прокачанный» инструмент копирования. Например,

```batchfile
robocopy C:\Source D:\Dest /mir
```

синхронизирует папки (зеркалирование).

## Команды для скриптинга и автоматизации

Эти команды применяются именно при написании батч-файлов, чтобы управлять логикой выполнения.

`@echo` — управляет выводом команд. `@echo off` обычно ставят первой строкой, чтобы команды не «засоряли» экран.

`pause` — ставит выполнение на паузу. Выводит сообщение «Press any key to continue...». Полезно, если вы хотите, чтобы окно не закрылось сразу.

`setlocal` — включает локальный режим переменных окружения. После него все переменные действуют только внутри скрипта и исчезают при `endlocal` или завершении.

Аргументы (`%1`, `%2`, `%*`) — позволяют передавать данные в скрипт.
Пример запуска:

```batchfile
myscript.bat input.txt 123
```

Внутри:

```batchfile
echo Первый аргумент: %1
echo Второй аргумент: %2
```

`for` — цикл. Пример:

```batchfile
for %%i in (1 2 3) do echo %%i
```

(в батч-файле обязательно с двумя знаками `%`).

`if` — условие. Например:

```batchfile
if exist file.txt echo Файл есть
```

`:<метка>` и `goto` — управление потоком выполнения.

```batchfile
:loop
echo Этот текст выводится снова и снова
goto loop
```

`call` — вызывает другой скрипт или подпрограмму внутри батника. Это нужно, чтобы не завершить текущий процесс, а «вернуться назад» после вызова.

Хорошо, давай сделаем подробное и понятное объяснение синтаксиса переменных в batch-файлах (Windows CMD). Объяснение будет рассчитано на новичков, поэтому я буду максимально "человечно" и разжёвано объяснять, даже если выйдет длинно.

---

## Переменные в batch-файлах

Переменная в batch-файле — это как "коробка" (аааааааа) или "контейнер" с названием, куда можно положить какое-то значение (например, текст или число), а потом использовать его в разных местах программы. Это нужно, чтобы не повторять одно и то же много раз, а также чтобы хранить промежуточные данные.

---

### Объявление переменной

В batch переменные создаются автоматически, когда вы им что-то присваиваете. Для этого используется команда:

```batchfile
set ИМЯ=ЗНАЧЕНИЕ
```

Пример:

```batchfile
set NAME=Вася
```

Теперь у нас есть переменная `NAME`, и внутри неё хранится слово `Вася`.

---

### Использование переменной

Чтобы "достать" значение переменной, нужно написать её имя в `%...%`:

```batchfile
echo %NAME%
```

Результат будет:

```batchfile
Вася
```

---

### Важные правила

1. **Пробелы после `=` не учитываются**:

   ```batchfile
   set X=123    →  X=123
   set X =123   →  X =123   (то есть имя переменной станет "X ")
   ```

   Поэтому **никогда не ставьте пробел после имени переменной**.

2. **Переменные нечувствительны к регистру**:
   `set name=123` и `set NAME=123` — это одна и та же переменная.

3. **Чтобы удалить переменную**:

   ```batchfile
   set NAME=
   ```

   После этого переменной больше нет.

---

### Встроенные переменные

В Windows CMD есть несколько "системных" переменных, которые уже существуют по умолчанию. Например:

* `%USERNAME%` — имя текущего пользователя
* `%DATE%` — сегодняшняя дата
* `%TIME%` — текущее время
* `%CD%` — текущая папка
* `%RANDOM%` — случайное число

---

### `%RANDOM%`

Это очень интересная встроенная переменная. Каждый раз, когда вы пишете `%RANDOM%`, Windows подставляет случайное число от `0` до `32767`.

Примеры:

```
echo %RANDOM%
```

Может вывести, например:

```
14567
```

Если повторить много раз:

```
echo %RANDOM%
echo %RANDOM%
echo %RANDOM%
```

Будут разные числа, например:

```
3012
26754
998
```

---

### Применение `%RANDOM%`

1. **Случайный выбор**
   Хотим, чтобы программа сказала "да" или "нет" случайным образом:

   ```batchfile
   set /a R=%RANDOM% %% 2
   if %R%==0 (
       echo Да
   ) else (
       echo Нет
   )
   ```

   Здесь `%RANDOM% %% 2` означает "остаток от деления на 2", то есть будет либо 0, либо 1.

2. **Случайное число в диапазоне**
   Например, от 1 до 10:

   ```batchfile
   set /a NUM=%RANDOM% %% 10 + 1
   echo %NUM%
   ```

   Результат всегда будет от 1 до 10 включительно.

---

### Арифметика в переменных

Чтобы считать с числами, нужно использовать:

```batchfile
set /a ИМЯ=выражение
```

Пример:

```batchfile
set /a X=5+3
echo %X%
```

Результат:

```batchfile
8
```

Можно и так:

```batchfile
set /a Y=%RANDOM% %% 100
echo %Y%
```

Это даст случайное число от 0 до 99.

## Как изучать команды CMD

Запоминать все команды **не обязательно**.

1. Под рукой всегда есть справочники и статьи. Для программиста нормально гуглить и копи пейстить (главное понимать, что код делает, и копи пейстить правильно ахахах)
2. У каждой команды есть встроенная справка. Достаточно добавить `/?`.

Примеры:

```batchfile
dir /?
copy /?
robocopy /?
```

Каждый покажет список всех параметров и примеры.
